import{a as n,s as m}from"./popup-B9BBiTrj.js";/* empty css              */async function v(e,u,o={}){try{const{data:r,error:t}=await m.auth.signUp({email:e,password:u,options:{data:{display_name:o.username??o.name??null,phone:o.phone??null}}});console.debug("signUp response data:",r),console.debug("signUp response error:",t);const a=r.user;if(a){const{error:s}=await m.from("profiles").insert({id:a.id,username:o.username??null,name:o.name??null,email:a.email??e,phone:o.phone??null});if(s)return console.error("Erro ao criar perfil:",s),n("Erro ao criar perfil. Tente novamente.",2e3,0),!1;n("Perfil criado com sucesso!",2e3,1)}return!0}catch(r){return console.error("Unexpected signUp error",r),n("Erro inesperado ao tentar cadastrar. Veja o console para mais detalhes."),!1}}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("cadastroForm");e&&e.addEventListener("submit",async u=>{u.preventDefault();const o=e.querySelector('input[name="name"]'),r=e.querySelector('input[name="username"]'),t=e.querySelector('input[name="email"]'),a=e.querySelector('input[name="phone"]'),s=e.querySelector('input[name="password"]'),c=e.querySelector('input[name="confirmPassword"]');if(!t||!s||!c){n("Campos de email ou senha não encontrados no formulário.",3e3,2);return}const p=o?.value.trim()??"",d=r?.value.trim()??"",f=a?.value.trim()??"",l=t.value.trim(),i=s.value,h=c.value;if(!l){n("Informe um email válido.",2e3,0);return}if(!i||i.length<6){n("A senha deve ter ao menos 6 caracteres",2e3);return}if(i!==h){n("As senhas não conferem.",2e3,0);return}await v(l,i,{name:p,username:d,phone:f})?(n("Cadastro realizado com sucesso! Por favor, verifique seu email para confirmar a conta."),setTimeout(()=>{window.location.href="/pages/login/login.html"},3e3)):n("Não foi possível completar o cadastro. Veja o console para mais detalhes.")})});
