import{s as c}from"./supabase-Djo7mtdQ.js";/* empty css              */async function h(e,i,r={}){try{const{data:n,error:s}=await c.auth.signUp({email:e,password:i,options:{data:{display_name:r.username??r.name??null,phone:r.phone??null}}});console.debug("signUp response data:",n),console.debug("signUp response error:",s);const o=n.user;if(o){const{error:a}=await c.from("profiles").insert({id:o.id,username:r.username??null,name:r.name??null,email:o.email??e,phone:r.phone??null});if(a)return console.error("Erro ao criar perfil:",a),!1;console.log("Perfil criado com sucesso")}return!0}catch(n){return console.error("Unexpected signUp error",n),alert("Erro inesperado ao tentar cadastrar. Veja o console para mais detalhes."),!1}}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("cadastroForm");e&&e.addEventListener("submit",async i=>{i.preventDefault();const r=e.querySelector('input[name="name"]'),n=e.querySelector('input[name="username"]'),s=e.querySelector('input[name="email"]'),o=e.querySelector('input[name="phone"]'),a=e.querySelector('input[name="password"]'),l=e.querySelector('input[name="confirmPassword"]');if(!s||!a||!l){alert("Campos de email ou senha não encontrados no formulário.");return}const m=r?.value.trim()??"",p=n?.value.trim()??"",d=o?.value.trim()??"",u=s.value.trim(),t=a.value,f=l.value;if(!u){alert("Informe um email válido.");return}if(!t||t.length<6){alert("A senha deve ter ao menos 6 caracteres");return}if(t!==f){alert("As senhas não conferem.");return}await h(u,t,{name:m,username:p,phone:d})?(alert("Cadastro realizado com sucesso! Por favor, verifique seu email para confirmar a conta."),window.location.href="/pages/login/login.html"):alert("Não foi possível completar o cadastro. Veja o console para mais detalhes.")})});
